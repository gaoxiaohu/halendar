!function(a){"use strict";var b=function(b,d){this.element=a(b),this.picker=a(c.template).appendTo(this.element).on({click:a.proxy(this.click,this)}),this.date=this.element.find("input").val(),this.lang=d.lang,this.onClick=d.onClick,this.addHalendarClass(),this.fillDaysName(),this.fill()};b.prototype={constructor:b,addHalendarClass:function(){this.element.addClass("halendar")},fillDaysName:function(){for(var a=this.lang,b=0;b<c.dates[a].daysMin.length;b++)this.element.find(".day-names").append(c.createDom("h2").text(c.dates[a].daysMin[b]))},fill:function(){""==this.date&&(this.date=new Date);var a=new Date(this.date),b=a.getFullYear(),d=a.getMonth();this.picker.find("h1").text(c.dates[this.lang].months[d]+" "+b),this.picker.find("h1").attr("date-month",c.dates.EN.months[d]+" "+b);var e=new Date(b,d-1,28,0,0,0,0),f=c.getDaysInMonth(e.getFullYear(),e.getMonth());e.setDate(f),e.setDate(f-(e.getDay()-1+7)%7);var g=new Date(e);g.setDate(g.getDate()+42),g=g.valueOf();for(var i,j,k,h=[];e.valueOf()<g;)j=e.getFullYear(),k=e.getMonth(),i=k==d&&j===b?"this-month":"",e.valueOf()===new Date(a.toDateString()).valueOf()&&(i=" today"),h.push('<div class="day '+i+'" data-date="'+e+'"><span>'+e.getDate()+"</span></div>"),e.setDate(e.getDate()+1);this.picker.find(".days").empty().append(h.join(""))},click:function(b){b.stopPropagation(),b.preventDefault();var d=a(b.target).closest("span,a");if(1===d.length)switch(d[0].nodeName.toLowerCase()){case"span":if(d.parent().is(".this-month")){var e=d.parent().attr("data-date");this.element.find("input").val(c.formatDate(new Date(e))),this.element.find(".this-month.selected").removeClass("selected"),d.parent().addClass("selected"),this.onClick.call(this.element.find("input"))}break;case"a":switch(d[0].className){case"prv-m":this.date=new Date(new Date(this.element.find("h1").attr("date-month")).getFullYear(),new Date(this.element.find("h1").attr("date-month")).getMonth()-1,1,0,0,0,0),this.fill();break;case"nxt-m":this.date=new Date(new Date(this.element.find("h1").attr("date-month")).getFullYear(),new Date(this.element.find("h1").attr("date-month")).getMonth()+1,1,0,0,0,0),this.fill()}}}},a.fn.halendar=function(c,d){return this.each(function(){var e=a(this),f=e.data("halendar"),g="object"==typeof c&&c;g=g||{},f||e.data("halendar",f=new b(this,a.extend({},a.fn.halendar.defaults,g))),"string"==typeof c&&f[c](d)})},a.fn.halendar.defaults={lang:"EN",onClick:function(){}},a.fn.halendar.Constructor=b;var c={dates:{EN:{daysMin:["Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},ZN:{daysMin:["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u65e5"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]}},createDom:function(b,c){return a(document.createElement(b)).addClass(c)},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,c.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},formatDate:function(a){var b={d:a.getDate(),m:a.getMonth()+1,yy:a.getFullYear().toString().substring(2),yyyy:a.getFullYear()};return b.dd=(b.d<10?"0":"")+b.d,b.mm=(b.m<10?"0":"")+b.m,b.yyyy+"-"+b.mm+"-"+b.dd},template:'<input type="hidden" class="data"  /><div class="halendar-container"><div class="halendar-pages"><div class="header"><a class="prv-m"><i class="fa fa-angle-left"></i></a><h1></h1><a class="nxt-m"><i class="fa fa-angle-right"></i></a><div class="day-names"></div></div><div class="days"></div></div></div>'}}(window.jQuery);